"use strict";function __values(r){var e="function"==typeof Symbol&&r[Symbol.iterator],t=0;return e?e.call(r):{next:function(){return r&&t>=r.length&&(r=void 0),{value:r&&r[t++],done:!r}}}}function __read(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var n,a,o=t.call(r),i=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(r){a={error:r}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i}function ensureInstalled(){if(!_Vue)throw new Error("Please install router before push.")}function createIndexRoute(r){return{path:r,query:{},params:{}}}function isSamePath(r,e){var t,n,a=r.split("?")[0].split("/").filter(Boolean),o=e.split("?")[0].split("/").filter(Boolean);if(a.length!==o.length)return!1;try{for(var i=__values(a.entries()),u=i.next();!u.done;u=i.next()){var s=__read(u.value,2),c=s[0],l=s[1],p=o[c];if(!l.startsWith(":")&&!p.startsWith(":")&&l!==p)return!1}}catch(r){t={error:r}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}function match(r,e){var t=r.replace(/(?<start>\/)(?<param>:[^\/\?]+)(?<end>\/?)/,"$1[^/?]+$3");return r.startsWith("^")||r.endsWith("$")||(t="^"+t+"$"),new RegExp(t).test(e)}function isZrIf(r){return"zr-if"===r.$options.name}function isZrElse(r){return"zr-else"===r.$options.name}function resolveParams(r,e){var t,n,a=r.split("/").filter(Boolean),o=e.split("/").filter(Boolean),i={};try{for(var u=__values(a.entries()),s=u.next();!s.done;s=u.next()){var c=__read(s.value,2),l=c[0],p=c[1],f=o[l];p.startsWith(":")&&(i[p.slice(1)]=f)}}catch(r){t={error:r}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return i}function resolveQuery(r){var e,t,n={},a=r.split("?")[1]||"";try{for(var o=__values(a.split("&")),i=o.next();!i.done;i=o.next()){var u=__read(i.value.split("="),2),s=u[0],c=u[1];if(s){var l=n[s];"string"==typeof l?n[s]=[l,c]:void 0===l?n[s]=c:l.push(c)}}}catch(r){e={error:r}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n}function resolvePrevIf(r){for(var e=-1,t=Reflect.get,n=r.$parent.$children.findIndex(function(e){return t(e,"zrid")===r.zrid}),a=[],o=n-1;o>-1;o--){var i=r.$parent.$children[o];if(isZrIf(i)){e=o;break}if(isZrElse(i))break}return-1!==e&&(a=r.$parent.$children.slice(e,n)),a}var router;function init(r){var e=r.base||"/",t=createIndexRoute(e.replace(/\/$/,"")+window.location.pathname);router=_Vue.observable({stack:[t],current:t,base:e}),window.addEventListener("popstate",function(){var r=router.stack.find(function(r){return isSamePath(r.path,window.location.pathname)});r?router.current=r:(router.current=createIndexRoute(router.base),router.stack.push(router.current))})}function routeTo(r,e){if(!isSamePath(r,router.current.path)){var t={data:e,path:r,query:resolveQuery(r),params:{}};router.stack.push(t),router.current=t}}function push(r,e){ensureInstalled(),routeTo(r,e),window.history.pushState(e,"",r)}function replace(r,e){ensureInstalled(),routeTo(r,e),window.history.replaceState(e,"",r)}function back(){ensureInstalled();var r=router.stack[router.stack.length-2];r&&(router.current=r,window.history.back())}function forward(){ensureInstalled();var r=router.stack.indexOf(router.current);if(r>=0){var e=router.stack[r+1];e&&(router.current=e,window.history.forward())}}Object.defineProperty(exports,"__esModule",{value:!0});var zrid=0;function getZrIDAndIncrement(){return zrid++}var _Vue,ZrIf={name:"zr-if",provide:function(){return{parentPath:this.path}},inject:{parentPath:{default:""}},props:{path:{required:!0,type:String},component:{type:[Object,String,Function],required:!0}},data:function(){return{matched:!0,zrid:getZrIDAndIncrement()}},render:function(r){var e=void 0,t=this.parentPath+this.path,n=router.current.path.replace(new RegExp("^"+router.base),"/");return this.matched=!1,match(t,n)&&(this.matched=!0,router.current.params=resolveParams(this.path,router.current.path),e=r(this.component,{props:{route:router.current}})),e}},ZrElseIf={name:"zr-else-if",provide:function(){return{parentPath:this.path}},inject:{parentPath:{default:""}},props:{path:{required:!0,type:String},component:{type:[Object,String,Function],required:!0}},data:function(){return{matched:!0,zrid:getZrIDAndIncrement()}},render:function(r){this.matched=!1;var e=void 0,t=this.parentPath+this.path,n=router.current.path.replace(new RegExp("^"+router.base),"/"),a=resolvePrevIf(this);return a.length?a.every(function(r){return!r.matched})&&match(t,n)&&(this.matched=!0,router.current.params=resolveParams(this.path,router.current.path),e=r(this.component,{props:{route:router.current}})):console.error("\n        In <zr-else-if>: path = "+this.path+", component = "+this.component+".\n        Use <zr-else-if> after at least one <zr-if>.\n      "),e}},ZrElse={name:"zr-else",inject:{parentPath:{default:""}},props:{component:{type:[Object,String,Function],required:!0}},data:function(){return{zrid:getZrIDAndIncrement()}},render:function(r){var e=void 0,t=resolvePrevIf(this);return t.length?t.every(function(r){return!r.matched})&&(e=r(this.component,{props:{route:router.current}})):console.error("\n        In <zr-else>: component = "+this.component+".\n        Use <zr-else> after at least one <zr-if>.\n      "),e}},ZrLink={props:{to:String,replace:Boolean},render:function(r){var e=this;return r("a",{on:{click:function(r){r.preventDefault(),e.replace?replace(e.to):push(e.to)}}},this.$slots.default)}};function install(r,e){void 0===e&&(e={}),(_Vue=r).component("zr-if",ZrIf),_Vue.component("zr-else-if",ZrElseIf),_Vue.component("zr-else",ZrElse),_Vue.component("zr-link",ZrLink),init(e)}var main={install:install};exports.back=back,exports.default=main,exports.forward=forward,exports.push=push,exports.replace=replace;
